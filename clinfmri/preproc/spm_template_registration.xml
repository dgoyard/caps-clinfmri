<pipeline>
    <docstring>
        SPM structural and functional warping to a template (3D or 4D).
    </docstring>
    <units>
        <unit name="4D_template_wraping">
            <module>clinfmri.preproc.spm_template_registration_4D.xml</module>
        </unit>
        <unit name="3D_template_wraping">
            <module>clinfmri.preproc.spm_template_registration_3D.xml</module>
        </unit>
        <switch name="template_type">
            <path name="4D">
                <unit name="4D_template_wraping"/>
            </path>
            <path name="3D">
                <unit name="3D_template_wraping"/>
            </path>
        </switch>
    </units>
    <links>
        <!-- INPUTS -->
        <link source="fmri_file" destination="4D_template_wraping.fmri_file"/>
        <link source="fmri_file" destination="3D_template_wraping.fmri_file"/>
        <link source="template_file" destination="4D_template_wraping.template_file"/>
        <link source="template_file" destination="3D_template_wraping.template_file"/>
        <link source="coregistered_struct_file" destination="3D_template_wraping.coregistered_struct_file"/>
        <link source="coregistered_struct_file" destination="4D_template_wraping.coregistered_struct_file"/>
        <link source="func_voxel_sizes" destination="4D_template_wraping.func_voxel_sizes"/>
        <link source="func_voxel_sizes" destination="3D_template_wraping.func_voxel_sizes"/>
        <link source="struct_voxel_sizes" destination="3D_template_wraping.struct_voxel_sizes"/>
        <!-- OUTPUTS -->
        <link source="4D_template_wraping.normalization_parameters" destination="normalization_parameters"/>
        <link source="3D_template_wraping.normalization_parameters" destination="normalization_parameters"/>
        <link source="3D_template_wraping.normalized_fmri_file" destination="normalized_fmri_file"/>
        <link source="4D_template_wraping.normalized_fmri_file" destination="normalized_fmri_file"/>
        <link source="3D_template_wraping.normalized_struct_file" destination="normalized_struct_file"/>
        <link source="4D_template_wraping.normalized_struct_file" destination="normalized_struct_file"/>
    </links>
    <positions>
        <position unit="3D_template_wraping" x="67" y="231" />
        <position unit="4D_template_wraping" x="58" y="63" />
        <position unit="inputs" x="-236" y="140"/>
        <position unit="outputs" x="428" y="283"/>
    </positions>
    <zoom level="1.0"/> 
</pipeline>
